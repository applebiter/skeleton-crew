```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                  SKELETON-APP VOICE COMMAND ARCHITECTURE                      ║
║                        Low-Latency Distributed System                         ║
╚═══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                            AUDIO INPUT LAYER                                 │
└─────────────────────────────────────────────────────────────────────────────┘

        🎤 Microphone                     🎤 Microphone                  🎤 Microphone
            │                                 │                              │
            │                                 │                              │
     ┌──────▼──────┐                  ┌──────▼──────┐              ┌──────▼──────┐
     │   ALSA/USB  │                  │   ALSA/USB  │              │   ALSA/USB  │
     │   Hardware  │                  │   Hardware  │              │   Hardware  │
     └──────┬──────┘                  └──────┬──────┘              └──────┬──────┘
            │                                 │                              │
            └─────────────────────────────────┴──────────────────────────────┘
                                              │
                                              │
┌─────────────────────────────────────────────┴─────────────────────────────┐
│                           JACK AUDIO SERVER                                │
│                                                                            │
│  ┌──────────────┐        ┌──────────────┐        ┌──────────────┐       │
│  │   Capture    │        │   Routing    │        │   Output     │       │
│  │   Ports      │───────▶│   Matrix     │───────▶│   Ports      │       │
│  └──────────────┘        └──────────────┘        └──────────────┘       │
│         │                                                                 │
│         │ system:capture_1                                               │
│         └─────────────────────────────────────────────────────────────┐  │
└───────────────────────────────────────────────────────────────────────┼──┘
                                                                         │
┌────────────────────────────────────────────────────────────────────────┼──┐
│                    VOICE COMMAND SERVICE LAYER                         │  │
│                                                                        │  │
│  ┌────────────────────────────────────────────────────────────────┐  │  │
│  │                    Vosk JACK STT Engine                        │  │  │
│  │                                                                │  │  │
│  │  ┌──────────────┐                                             │  │  │
│  │  │ JACK Client  │◀────────────────────────────────────────────┼──┘  │
│  │  │ "voice_in"   │  skeleton_app_vosk:voice_in                │     │
│  │  └──────┬───────┘                                             │     │
│  │         │                                                      │     │
│  │         ▼                                                      │     │
│  │  ┌──────────────┐    ┌─────────────────┐                     │     │
│  │  │ Audio Buffer │───▶│ Vosk Model      │                     │     │
│  │  │ (100ms)      │    │ (vosk-en-us-0.22)│                    │     │
│  │  └──────────────┘    └────────┬────────┘                     │     │
│  │                               │                               │     │
│  │         Partial ◀─────────────┴───────────▶ Final            │     │
│  │           │                                  │                │     │
│  │           ▼                                  ▼                │     │
│  │  ┌─────────────────────────────────────────────────────┐    │     │
│  │  │         Wake Word Detector                          │    │     │
│  │  │  • "computer indigo" → indigo                       │    │     │
│  │  │  • "computer green" → green                         │    │     │
│  │  │  • "computer karate" → karate                       │    │     │
│  │  └────────────────────┬────────────────────────────────┘    │     │
│  │                       │                                      │     │
│  │                       ▼                                      │     │
│  │  ┌─────────────────────────────────────────────────────┐    │     │
│  │  │         Command Aliasing                            │    │     │
│  │  │  "play" → "transport_start"                         │    │     │
│  │  │  "stop" → "transport_stop"                          │    │     │
│  │  │  "record" → "recording_start"                       │    │     │
│  │  └────────────────────┬────────────────────────────────┘    │     │
│  │                       │                                      │     │
│  └───────────────────────┼──────────────────────────────────────┘     │
│                          │                                            │
│  ┌───────────────────────▼──────────────────────────────────────┐    │
│  │              FastAPI Service (Port 8001)                     │    │
│  │                                                              │    │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │    │
│  │  │   REST API   │  │  WebSocket   │  │   History    │     │    │
│  │  │   Endpoints  │  │  Streaming   │  │   Tracking   │     │    │
│  │  └──────┬───────┘  └──────┬───────┘  └──────────────┘     │    │
│  │         │                 │                                 │    │
│  └─────────┼─────────────────┼─────────────────────────────────┘    │
└───────────┼─────────────────┼──────────────────────────────────────┘
            │                 │
            │                 │
┌───────────┼─────────────────┼──────────────────────────────────────┐
│           │  NETWORK LAYER  │                                       │
│           │                 │    192.168.32.0/24                    │
└───────────┼─────────────────┼───────────────────────────────────────┘
            │                 │
            ├─────────────────┼─────────────────────────────┐
            │                 │                             │
            │                 │                             │
┌───────────▼─────┐  ┌────────▼──────┐          ┌──────────▼──────┐
│   indigo        │  │   green       │          │   karate        │
│ 192.168.32.7    │  │ 192.168.32.5  │          │ 192.168.32.11   │
│                 │  │               │          │                 │
│ REST API        │  │ REST API      │          │ REST API        │
│ WebSocket       │  │ WebSocket     │          │ WebSocket       │
└────────┬────────┘  └───────┬───────┘          └─────────┬───────┘
         │                   │                            │
         │                   │                            │
┌────────▼───────────────────▼────────────────────────────▼────────┐
│                    APPLICATION LAYER                             │
│                                                                   │
│  ┌──────────────┐   ┌──────────────┐   ┌──────────────┐        │
│  │ GUI Controls │   │ JACK Control │   │ Recording    │        │
│  │ - Play/Stop  │   │ - Transport  │   │ - Start/Stop │        │
│  │ - Status     │   │ - Routing    │   │ - Monitoring │        │
│  └──────────────┘   └──────────────┘   └──────────────┘        │
│                                                                   │
│  ┌──────────────┐   ┌──────────────┐   ┌──────────────┐        │
│  │ Video Sync   │   │ LLM Agent    │   │ TTS Output   │        │
│  │ - Xjadeo     │   │ - Planning   │   │ - Feedback   │        │
│  │ - Control    │   │ - Execution  │   │ - Status     │        │
│  └──────────────┘   └──────────────┘   └──────────────┘        │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                    SERVICE DISCOVERY                             │
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │              PostgreSQL Registry                         │   │
│  │  • Node registration                                     │   │
│  │  • Service capabilities                                  │   │
│  │  • Health monitoring                                     │   │
│  │  • Load balancing                                        │   │
│  └──────────────────────────────────────────────────────────┘   │
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │              ZeroMQ Pub/Sub                              │   │
│  │  • Real-time announcements                               │   │
│  │  • Service status updates                                │   │
│  │  • Cross-node messaging                                  │   │
│  └──────────────────────────────────────────────────────────┘   │
└───────────────────────────────────────────────────────────────────┘

╔═══════════════════════════════════════════════════════════════════╗
║                        DATA FLOW                                  ║
╚═══════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────┐
│  Step 1: Voice Input                                             │
│  User speaks: "computer indigo"                                  │
│  Latency: 0ms (instant)                                          │
└────────────────────────────┬─────────────────────────────────────┘
                             │
┌────────────────────────────▼─────────────────────────────────────┐
│  Step 2: JACK Capture                                            │
│  Microphone → ALSA → JACK → voice_in port                        │
│  Latency: 5-10ms (one JACK period)                               │
└────────────────────────────┬─────────────────────────────────────┘
                             │
┌────────────────────────────▼─────────────────────────────────────┐
│  Step 3: Vosk Processing                                         │
│  Audio buffer → Vosk model → Partial/Final transcription         │
│  Latency: 100-200ms (model processing)                           │
└────────────────────────────┬─────────────────────────────────────┘
                             │
┌────────────────────────────▼─────────────────────────────────────┐
│  Step 4: Wake Word Detection                                     │
│  Text → Pattern match → Node identified: "indigo"                │
│  Latency: <1ms (string matching)                                 │
└────────────────────────────┬─────────────────────────────────────┘
                             │
┌────────────────────────────▼─────────────────────────────────────┐
│  Step 5: Command Recognition                                     │
│  User speaks: "play"                                             │
│  Text → Alias lookup → "transport_start"                         │
│  Latency: 100-200ms (Vosk) + <1ms (lookup)                       │
└────────────────────────────┬─────────────────────────────────────┘
                             │
┌────────────────────────────▼─────────────────────────────────────┐
│  Step 6: Network Broadcast                                       │
│  WebSocket → All connected clients                               │
│  Latency: 1-5ms (LAN)                                            │
└────────────────────────────┬─────────────────────────────────────┘
                             │
┌────────────────────────────▼─────────────────────────────────────┐
│  Step 7: Command Execution                                       │
│  Handler called → JACK transport started                         │
│  Latency: <1ms (local execution)                                 │
└────────────────────────────┬─────────────────────────────────────┘
                             │
                   ╔═════════▼══════════╗
                   ║ TOTAL: 150-250ms   ║
                   ╚════════════════════╝

╔═══════════════════════════════════════════════════════════════════╗
║                    EXTENSIBILITY POINTS                           ║
╚═══════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────┐
│  Custom Command Handlers                                         │
│  → Register your own commands via API or code                    │
│  → Async and sync handler support                                │
│  → Per-node or global commands                                   │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  LLM Integration                                                 │
│  → Natural language understanding                                │
│  → Context-aware command parsing                                 │
│  → Multi-step command sequences                                  │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  TTS Feedback                                                    │
│  → Voice confirmation of commands                                │
│  → Status updates via speech                                     │
│  → Error notifications                                           │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  GUI Integration                                                 │
│  → Visual feedback for wake words                                │
│  → Command history display                                       │
│  → Real-time transcription view                                  │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  Mobile Apps                                                     │
│  → WebSocket client for iOS/Android                             │
│  → Remote command triggering                                     │
│  → Network discovery                                             │
└──────────────────────────────────────────────────────────────────┘

╔═══════════════════════════════════════════════════════════════════╗
║                        BUILT WITH                                 ║
╚═══════════════════════════════════════════════════════════════════╝

  🐍 Python 3.12        📡 FastAPI            🔌 JACK Audio
  🎤 Vosk STT          🔄 WebSockets         🗄️  PostgreSQL
  ⚡ Asyncio           🌐 ZeroMQ            🐳 systemd
  📊 Pydantic          🎯 Click CLI          📝 Rich Console

```
